name       : dde-session-shell
version    : 5.0.0.5
release    : 2
source     :
    - https://github.com/linuxdeepin/dde-session-shell/archive/5.0.0.5.tar.gz : 66434ae16f096638eebc75e76c13fa88b48a94d054f3d36376648e7539101d75
license    : GPL-3.0-or-later
component  : desktop.deepin
summary    : dde-session-shell module
description: |
    dde-session-shell module
builddeps  :
    - pkgconfig(dtkwidget)
    - pkgconfig(gsettings-qt)
    - pkgconfig(liblightdm-qt5-3)
    - pkgconfig(Qt5Core)
    - pkgconfig(Qt5Multimedia)
    - pkgconfig(Qt5Svg)
    - pkgconfig(Qt5X11Extras)
    - pkgconfig(xcb-ewmh)
    - pkgconfig(xcursor)
    - pkgconfig(xi)
    - pkgconfig(xrandr)
    - pkgconfig(xtst)
    - deepin-qt-dbus-factory-devel
setup      : |
    sed -i '/darrowrectangle/d' CMakeLists.txt src/widgets/widgets.pri
    sed -i 's/include "darrowrectangle.h"/include <darrowrectangle.h>/' src/widgets/errortooltip.h
    %cmake_ninja
build      : |
    %ninja_build
install    : |
    %ninja_install
    # Fix greeter not working
    chmod +x %installroot%/usr/bin/deepin-greeter
