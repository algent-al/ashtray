name       : megasync
version    : 4.2.0
release    : 12
source     :
    - https://github.com/meganz/MEGAsync/archive/v4.2.0_ArchLinux.tar.gz : 7fb61b492b71a55a8c50eedd3c499df8ba3d5eaa95b1acb9923a2d3bbbfcf8ab
    - https://github.com/meganz/sdk/archive/v3.6.1.tar.gz : d9c9527befe7a713c6d958d58ba2e75b42f89cca08d4922ef16e452e1f7315d9
license    : Mega Limited Code Review License
component  : network.clients
summary    : Mega account files syncer
description: |
    Easy automated syncing between your computers and your Mega Cloud Drive.
builddeps  :
    - pkgconfig(gl)
    - pkgconfig(libcares)
    - pkgconfig(libcryptopp)
    - pkgconfig(libcurl)
    - pkgconfig(libmediainfo)
    - pkgconfig(libraw)
    - pkgconfig(libsodium)
    - pkgconfig(libuv)
    - pkgconfig(Qt5Core)
    - pkgconfig(Qt5Svg)
    - pkgconfig(Qt5UiTools)
    - pkgconfig(sqlite3)
    - pkgconfig(zlib)
    - bzip2-devel
setup      : |
    cd $workdir/src/MEGASync/mega
    tar -xf $sources/v3.6.1.tar.gz --strip 1 -C .
    %autogen --without-freeimage  \
        --without-termcap \
        --without-ffmpeg
    cd $workdir/src
    %configure
build      : |
    cd $workdir/src
    %qmake MEGA.pro
    lrelease MEGASync/MEGASync.pro
    %make
install    : |
    install -Dm 644 $workdir/LICENCE.md $installdir/usr/share/licenses/megasync/LICENCE.md
    install -Dm 644 $workdir/installer/terms.txt $installdir/usr/share/licenses/megasync/terms.txt
    install -Dm 755 $workdir/src/MEGASync/megasync $installdir/usr/bin/megasync
    install -Dm 644 $workdir/src/MEGASync/platform/linux/data/megasync.desktop $installdir/usr/share/applications/megasync.desktop
    for size in 16x16 32x32 48x48 128x128 256x256
    do
    install -Dm 644 $workdir/src/MEGASync/platform/linux/data/icons/hicolor/$size/apps/mega.png $installdir/usr/share/icons/hicolor/$size/apps/mega.png
    done
